{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "ARL schema",
    "description": "Schema describing ARL parameters",
    "version": "0.1",
    "type": "object",
    "logging": {
        "description": "Definition of logging",
        "basic": {
            "filename":{
                "description": "File to write to",
                "type": "string"
            },
            "filemode":{
                "description": "File access mode",
                "type": "string"
            },
            "format":{
                "description": "Format e.g. ''%(asctime)s,%(msecs)d %(name)s %(levelname)s %(message)s'",
                "type": "string"
            },
            "datefmt": {
                "description": "Date format e.g. '%H:%M:%S'"
            },
            "level": {
                "description": "Logging level e.g. logging.INFO, logging.DEBUG",
                "type": "string"
            }
        }
    },

    "execute": {
        "description": "Control of execution",
        "use_dask": {
            "description": "Use Dask? (True or False)",
            "type": "string"
        }
    },

    "definitions": {
        "direction": {
            "description": "Direction on sky",
            "type": "object",
            "properties": {
                "ra": {
                    "type": "string"
                },
                "dec": {
                    "type": "string"
                },
                "equinox": {
                    "type": "string",
                    "default": "J2000"
                },
                "frame": {
                    "type": "string",
                    "default": "ICRS"
                }
            },
            "required" : ["ra", "dec", "equinox", "frame"]
        },
        "polarisation_frame": {
            "properties": {
                "type": {
                    "enum": [
                        "circular",
                        "circularnp",
                        "linear",
                        "linearnp",
                        "stokesIQUV",
                        "stokesIV",
                        "stokesIQ",
                        "stokesI"
                    ]
                }
            },
            "required": [
                "type"
            ]
        },

        "inputs": {
            "description": "Definition of possible inputs",
            "vislist": {
                "description": "Input list of visibilities",
                "type": "string",
                "format": "hdf"
            },
            "image": {
                "description:": "Image",
                "type": "string",
                "format": "hdf"
            },
            "skymodel": {
                "description:": "Sky model (images plus components)",
                "type": "string",
                "format": "hdf"
            }
        },

        "outputs": {
            "description":"Definition of possible outputs",
            "vislist": {
                "description": "Output list of visibilities",
                "type": "string",
                "format": "hdf"
            },
            "image": {
                "description:": "Image",
                "type": "string",
                "format": "hdf"
            },
            "skymodel": {
                "description:": "Sky model (images plus components)",
                "type": "string",
                "format": "hdf"
            }
        },

        "imaging": {
            "description": "Parameters controlling the imaging steps",
            "context": {
                "description": "Imaging context e.g. wstack, facets",
                "type": "string",
                "pattern": "^[a-z]*$",
                "default":"2d"
            },
            "vis_slices": {
                "description": "Number of wslices",
                "type": "number",
                "default":0
            }
        },

        "image": {
            "description": "Parameters used to define a desired image",
            "phasecentre": {
                "description": "Phase centre of image (a direction)",
                "$ref": "#/definitions/direction"
            },
            "polarisation_frame": {
                "description": "Polarisation frame e.g. stokesI, stokesIQUV",
                "$ref": "#/definitions/polarisation_frame",
                "default":"stokesI"
            },
            "cellsize": {
                "description": "Cellsize e.g. 0.001rad, 1arcsec",
                "type": "string"
            },
            "npixel": {
                "description": "Number of pizels on each axis",
                "type": "string",
                "default": 1024
            },
            "nchan": {
                "description": "Number of channels in image",
                "type": "string",
                "default": 1
            }
        },

        "deconvolution": {
            "description": "Parameters defining deconvolution",
            "scales": {
                "description": "Vector of scales used in multi-scale deconvolution",
                "type": "array",
                "items": {
                    "type": "number"
                }
            },
            "algorithm": {
                "description": "Deconvolution algorithm e.g. hogbom, msclean, mmclean",
                "type": "string",
                "default":"msclean"
            },
            "niter": {
                "description": "Number of iterations",
                "type": "number",
                "default": 1000
            },
            "threshold": {
                "description": "Absolute threshold in Jy/beam",
                "type": "number",
                "default": 0.0
            },
            "fractional_threshold": {
                "description": "",
                "type": "number",
                "default": 0.1
            },
            "gain": {
                "description": "Deconvolution loop gain > 0 < 2",
                "type": "number",
                "default": 0.1
            },
            "psf_support": {
                "description": "Support of PSF used in minor loop",
                "type": "number",
                "default": 64
            },
            "nmoments": {
                "description": "Number of moments (Taylor terms)",
                "type": "number",
                "default": 1
            },
            "deconvolve_facets": {
                "description": "Number of facets used in deconvolution",
                "type": "number",
                "default": 1
            },
            "deconvolve_overlap": {
                "description": "Overlap between facets in deconvolution",
                "type": "number",
                "default": 0
            },
            "deconvolve_taper": {
                "description": "Taper used in deconvolution: None, linear, tukey",
                "type": "string",
                "default": "tukey"
            },
            "nmajor": {
                "description": "Number of major cycles",
                "type": "number",
                "default": 1
            }
        }
    }
}
